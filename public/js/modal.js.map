{"version":3,"sources":["ajax-modal.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modal.js","sourcesContent":["$(document).ready(function(){\r\n\r\n\r\n\r\n    var url =\"category/\";\r\n    var old_name = \"\";\r\n\r\n    //display modal form for category editing\r\n    $('.edit-modal').click(function(){\r\n        var category_slug = $(this).val();\r\n\r\n        $.get(url  + category_slug, function (data) {\r\n            //success data\r\n            console.log(category_slug);\r\n            $('#category_name').val(data.name);\r\n            old_slug = category_slug;\r\n            $('#btn-save').val(\"update\");\r\n            $('#categoryModal').modal('show');\r\n        })\r\n    });\r\n\r\n    //display modal form for creating new Category\r\n    $('#btn-add').click(function(){\r\n        $('#btn-save').val(\"add\");\r\n        $('#frmCategory').trigger(\"reset\");\r\n        $('#categoryModal').modal('show');\r\n    });\r\n\r\n    //delete category and remove it from list\r\n    $('.delete-category').click(function(){\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n        \r\n        var category_slug = $(this).val();\r\n        $.post(url+category_slug, { _method:'DELETE'});\r\n    });\r\n\r\n    //create new category / update existing category\r\n    $(\"#btn-save\").click(function (e) {\r\n        var url='category';\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n        //used to determine the http verb to use [add=POST], [update=PUT]\r\n        var state = $('#btn-save').val();\r\n\r\n        if (state == \"update\"){\r\n            // 更新\r\n            url =url+ '/'+ old_slug;\r\n            var formData = {\r\n                _method:'PUT',\r\n                name:$('#category_name').val(),\r\n            }\r\n            console.log('old_slug = '+old_slug);\r\n            $.post(url, formData);\r\n        }else{\r\n            // 新增\r\n            var formData = {\r\n                name:$('#category_name').val(),\r\n            }\r\n            $.post(url, formData );\r\n        }\r\n        console.log(formData);\r\n\r\n    });\r\n});\r\n"],"sourceRoot":"/source/"}