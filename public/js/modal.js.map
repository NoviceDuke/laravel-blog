{"version":3,"sources":["ajax-modal.js","tag-modal.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modal.js","sourcesContent":["$(document).ready(function(){\r\n\r\n\r\n\r\n    var url =\"category/\";\r\n    var old_name = \"\";\r\n\r\n    //display modal form for category editing\r\n    $('.edit-modal').click(function(){\r\n        var category_slug = $(this).val();\r\n\r\n        $.get(url  + category_slug, function (data) {\r\n            //success data\r\n            console.log(category_slug);\r\n            $('#category_name').val(data.name);\r\n            old_slug = category_slug;\r\n            $('#btn-save').val(\"update\");\r\n            $('#categoryModal').modal('show');\r\n        })\r\n    });\r\n\r\n    //display modal form for creating new Category\r\n    $('#btn-add').click(function(){\r\n        $('#btn-save').val(\"add\");\r\n        $('#frmCategory').trigger(\"reset\");\r\n        $('#categoryModal').modal('show');\r\n    });\r\n\r\n    //delete category and remove it from list\r\n    $('.delete-category').click(function(){\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n        var category_slug = $(this).val();\r\n        $.post(url+category_slug, { _method:'DELETE'});\r\n    });\r\n\r\n    //create new category / update existing category\r\n    $(\"#btn-save\").click(function (e) {\r\n        var url='category';\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n        //used to determine the http verb to use [add=POST], [update=PUT]\r\n        var state = $('#btn-save').val();\r\n\r\n        if (state == \"update\"){\r\n            // 更新\r\n            url =url+ '/'+ old_slug;\r\n            var formData = {\r\n                _method:'PUT',\r\n                name:$('#category_name').val(),\r\n            }\r\n            console.log('old_slug = '+old_slug);\r\n            $.post(url, formData);\r\n        }else{\r\n            // 新增\r\n            var formData = {\r\n                name:$('#category_name').val(),\r\n            }\r\n            $.post(url, formData, function(data) {\r\n                console.log('Create Success');\r\n                console.log('Response : ');\r\n                console.log('name = '+data.name);\r\n                console.log('slug = '+data.slug);\r\n\r\n            });\r\n        }\r\n      \r\n        console.log(formData);\r\n\r\n    });\r\n});\r\n","$(document).ready(function(){\r\n\r\n\r\n\r\n    var url =\"tag/\";\r\n    var old_name = \"\";\r\n\r\n    //display modal form for tag editing\r\n  $(document).on(\"click\",'.tag-edit',function(){\r\n        var tag_id = $(this).val();``\r\n\r\n        $.get(url  + tag_id, function (data) {\r\n            //success data\r\n            console.log(tag_id);\r\n            $('#tag_name').val(data.name);\r\n            console.log(data.name);\r\n            old_id = tag_id;\r\n            $('#tag-save').val(\"update\");\r\n            $('#tagModal').modal('show');\r\n        })\r\n    });\r\n\r\n    //display modal form for creating new Tag\r\n    $('#tag-add').click(function(){\r\n        $('#tag-save').val(\"add\");\r\n        $('#frmTag').trigger(\"reset\");\r\n        $('#tagModal').modal('show');\r\n    });\r\n\r\n    //delete tag and remove it from list\r\n\r\n    $(document).on(\"click\",'.delete-tag',function(){\r\n\r\n        var tag_id = $(this).val();\r\n        console.log(tag_id);\r\n          $.ajax({\r\n           type: \"DELETE\",\r\n           url: url  + tag_id,\r\n           success: function (data) {\r\n               console.log(data);\r\n\r\n               $('#tag' + tag_id).remove();\r\n           },\r\n         });\r\n        });\r\n\r\n    //create new tag / update existing tag\r\n    $(\"#tag-save\").click(function (e) {\r\n        var url='tag';\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n        e.preventDefault();\r\n        //used to determine the http verb to use [add=POST], [update=PUT]\r\n        var state = $('#tag-save').val();\r\n        var tname = $('#tag_name').val()\r\n        var formData = {\r\n          name:$('#tag_name').val(),\r\n        }\r\n        var tag_id = old_id;\r\n        var  type =\"POST\";\r\n        if (state == \"update\"){\r\n            // 更新\r\n            url =url+\"/\"+old_id;\r\n            type = \"PUT\";\r\n            //$.post(url, formData);\r\n          }\r\n\r\n            /*$.post(url, formData, function(data) {\r\n                console.log('Create Success');\r\n                console.log('Response : ');\r\n                console.log('name = '+data.name);\r\n\r\n            });*/\r\n\r\n\r\n\r\n        $.ajax({\r\n        //  $.post(url, formData);\r\n          type:type,\r\n          url:url,\r\n          data:formData,\r\n          datatype:'json',\r\n          success:function(data){\r\n            // tag data\r\n            var tag = '<tr id=\"tag' + data.id + '\"><td>' + data.id + '</td><td>' + data.name + '</td><td>' + data.created_at + '</td>';\r\n            tag += '<td><button class=\"btn btn-info btn-md tag-edit\" value=\"' + data.id + '\">Edit</button>';\r\n            tag += '<button class=\"btn btn-danger btn-md  delete-tag\" value=\"' + data.id + '\">Delete</button></td></tr>';\r\n            // state condition\r\n            if(state == \"add\"){\r\n              $('#tag_list').append(tag);\r\n            }else {\r\n              console.log(tag_id);\r\n              console.log(state);\r\n              console.log(type);\r\n              console.log(tname);\r\n\r\n              $('#tag'+old_id).replaceWith(tag);\r\n            }\r\n\r\n            $('#frmTag').trigger(\"reset\");\r\n            $('#tagModal').modal('hide');\r\n          },\r\n\r\n        });\r\n\r\n      //  console.log(formData);\r\n\r\n\r\n\r\n\r\n\r\n    });\r\n});\r\n"],"sourceRoot":"/source/"}