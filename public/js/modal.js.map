{"version":3,"sources":["ajax-modal.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modal.js","sourcesContent":["$(document).ready(function(){\r\n\r\n\r\n\r\n    var url =\"category\";\r\n  \r\n\r\n    //display modal form for category editing\r\n    $('.edit-modal').click(function(){\r\n        var category_slug = $(this).val();\r\n\r\n        $.get(url  + category_slug, function (data) {\r\n            //success data\r\n            //console.log(data);\r\n            console.log(category_slug);\r\n            //$('#category_slug').text(data.slug);\r\n          //  $('#category_slug').val(data.slug);\r\n          //  $('#category').val(data.name);\r\n          //  $('#btn-save').val(\"update\");\r\n            $('#categoryModal').modal('show');\r\n        })\r\n    });\r\n\r\n    //display modal form for creating new Category\r\n    $('#btn-add').click(function(){\r\n        $('#btn-save').val(\"add\");\r\n        $('#frmCategory').trigger(\"reset\");\r\n        $('#categoryModal').modal('show');\r\n    });\r\n\r\n    //delete category and remove it from list\r\n    $('.delete-modal').click(function(){\r\n        var category_slug = $(this).val();\r\n\r\n        $.ajax({\r\n\r\n            type: \"DELETE\",\r\n            url: url + '/' + category_slug,\r\n            success: function (data) {\r\n                console.log(data);\r\n\r\n                $(\"#category\" + category_slug).remove();\r\n            },\r\n            error: function (data) {\r\n                console.log('Error:', data);\r\n            }\r\n        });\r\n    });\r\n\r\n    //create new category / update existing category\r\n    $(\"#btn-save\").click(function (e) {\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n\r\n        e.preventDefault();\r\n\r\n        var formData = {\r\n\r\n            name:$('#name').val(),\r\n        }\r\n\r\n        //used to determine the http verb to use [add=POST], [update=PUT]\r\n        var state = $('#btn-save').val();\r\n\r\n        var type = \"POST\"; //for creating new resource\r\n        var category_id = $('#category_id').val();;\r\n        var my_url = url;\r\n\r\n        if (state == \"update\"){\r\n            type = \"PUT\"; //for updating existing resource\r\n            my_url += '/' + category_id;\r\n        }\r\n\r\n        console.log(formData);\r\n\r\n        $.ajax({\r\n\r\n            type: type,\r\n            url: my_url,\r\n            data: formData,\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                console.log(data);\r\n\r\n                var category = '<tr id=\"category' + data.id + '\"><td>' + data.id + '</td><td>' + data.category + '</td><td>' + data.description + '</td><td>' + data.created_at + '</td>';\r\n                category += '<td><button class=\"btn btn-warning btn-xs btn-detail open-modal\" value=\"' + data.id + '\">Edit</button>';\r\n                category += '<button class=\"btn btn-danger btn-xs btn-delete delete-category\" value=\"' + data.id + '\">Delete</button></td></tr>';\r\n\r\n                if (state == \"add\"){ //if user added a new record\r\n                    $('#category-list').append(category);\r\n                }else{ //if user updated an existing record\r\n\r\n                    $(\"#category\" + category_id).replaceWith( category );\r\n                }\r\n\r\n                $('#frmCategory').trigger(\"reset\");\r\n\r\n                $('#categoryModal').modal('hide')\r\n            },\r\n            error: function (data) {\r\n                console.log('Error:', data);\r\n            }\r\n        });\r\n    });\r\n});\r\n"],"sourceRoot":"/source/"}